{
  "hash": "d20a4cd0138c9bc629219e224f7f264e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Importing and Exporting Data\ndescription: 'A journey of ten thousand steps begins with a single <font color=\"#009E73\">**import**</font>\n  and ends with an <font color=\"#0072B2\">**export**</font>.\n\n  '\ncreative_commons: CC BY\npreview: https://r4wrds.com/img/cover.png\n---\n\n\n\n:::obj\n\n**Learning objectives**\n \n - Know the basics of how a function works\n - Understand how to read (import) data into R\n - Explore data within R using `View()`\n - Understand how to write (export) data from R\n - Understand how to read and write different data formats (e.g., excel, csv, shp, rds, dbf, access)\n \n:::\n\n<br>\n\n## What's a function?\n\nFunctions are how work gets done in `R`, and before we jump into reading and writing data, we need to know how functions work because we will use functions to perform these tasks.\n\nA **function** takes any number of **arguments** and, performs some transformations, and returns an **output**. \n\nFor example, the `R` function `sum()` takes any number of numeric arguments and adds them together (recall you can view the documentation for `sum()` by entering `?sum`). Let's add 1 and 2 like so:  \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(1, 2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n```\n\n\n:::\n:::\n\n\n\n\nIn `R`, we can create sequences easily. If we wanted to create a sequence of numbers from 1 to 10, we can use the function `seq()`, which takes 3 arguments: `from` (start value), `to` (end value), and `by` (increment of the sequence). \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nseq(0, 10, 1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1]  0  1  2  3  4  5  6  7  8  9 10\n```\n\n\n:::\n:::\n\n\n\n\nConvince yourself that creating sequences of arbitrary length is possible. Can you create a sequence from 0 to 1 million by an increment of 500?\n\nBecause creating sequences incremented by 1 are so common, there's a special shorthand for these sequences, `1:10`. Let's take the sum of the sequence from 1 to 10 by providing it as an argument to the function `sum()`:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(1:10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 55\n```\n\n\n:::\n:::\n\n\n\n\n\n`sum()` and `seq()` are two of many functions you'll encounter in `R`. Like all functions, they take inputs (arguments) and return an output. To take advantage of functions, we need to apply them to our data. Let's now use import and export functions in R to explore some water resources data.  \n\n<br>\n\n## Read (import) data\n\nData come in many formats, and `R` has utilities for reading and writing all kinds of data. In this lesson, we'll explore some of the most common data formats you'll encounter in the wild, and the functions used to import these data.\n\n### csv (comma separated values) \n\nThe comma separated value, or `.csv`, is a simple and effective way to store tabular data. To read a csv file, we first import the `readr` library, which contains the function `read_csv()`. Let's read a file from our `data/gwl` folder that contains station information for groundwater level monitoring sites in California. You can also type \"data/\" and press **Tab** with your cursor just after the \"/\" to view all files in that path.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\n\n# read the \"stations\" csv, save it as an object called \"stations\", and print the object\nstations <- read_csv(\"data/gwl/stations.csv\")\n\nhead(stations)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"STN_ID\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"SITE_CODE\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"SWN\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WELL_NAME\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"LATITUDE\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"LONGITUDE\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WLM_METHOD\"],\"name\":[7],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WLM_ACC\"],\"name\":[8],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"BASIN_CODE\"],\"name\":[9],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"BASIN_NAME\"],\"name\":[10],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"COUNTY_NAME\"],\"name\":[11],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WELL_DEPTH\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WELL_USE\"],\"name\":[13],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WELL_TYPE\"],\"name\":[14],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WCR_NO\"],\"name\":[15],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"51445\",\"2\":\"320000N1140000W001\",\"3\":\"NA\",\"4\":\"Bay Ridge\",\"5\":\"35.5604\",\"6\":\"-121.755\",\"7\":\"USGS quad\",\"8\":\"Unknown\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"Monterey\",\"12\":\"NA\",\"13\":\"Residential\",\"14\":\"Part of a nested/multi-completion well\",\"15\":\"NA\"},{\"1\":\"25067\",\"2\":\"325450N1171061W001\",\"3\":\"19S02W05K003S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\"},{\"1\":\"25068\",\"2\":\"325450N1171061W002\",\"3\":\"19S02W05K004S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\"},{\"1\":\"39833\",\"2\":\"325450N1171061W003\",\"3\":\"19S02W05K005S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\"},{\"1\":\"25069\",\"2\":\"325450N1171061W004\",\"3\":\"19S02W05K006S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\"},{\"1\":\"38479\",\"2\":\"325450N1171061W005\",\"3\":\"19S02W05K007S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\nYou can also pass a URL to `read_csv()`.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read the \"stations\" csv from the Github URL\nstations <- read_csv(\"https://github.com/r4wrds/r4wrds/blob/main/intro/data/gwl/stations.csv?raw=true\")\n```\n:::\n\n\n\n\n\nR tells us upon import that this data has 43,807 rows and 15 columns. We can verify this with the `nrow()` and `ncol()` functions, and the `dim()` function:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnrow(stations)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 43807\n```\n\n\n:::\n\n```{.r .cell-code}\nncol(stations)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 15\n```\n\n\n:::\n\n```{.r .cell-code}\ndim(stations)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 43807    15\n```\n\n\n:::\n:::\n\n\n\n\n\n\nWhenever we see rectangular data like this in R, it's probably a `data.frame` object, but just to check, we can always ask R to tell us what the class of the object is:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass(stations)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"spec_tbl_df\" \"tbl_df\"      \"tbl\"         \"data.frame\" \n```\n\n\n:::\n:::\n\n\n\n\nThe printed output shows us the first few rows of the stations data we just read, but if we wanted to dig a bit deeper and see more than 10 rows and 7 columns of data, we can use the function `View()`, which in RStudio opens a data viewer. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nView(stations)\n```\n:::\n\n\n\n\nWithin the viewer, we can search the data.frame, sort rows, and scroll through the data to inspect it.\n\nA data.frame is made of many vectors of the same length. We can access a column using the `$` operator, and subset the vector with bracket notation `[`. To access the first row in the `WELL_TYPE` column: \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstations$WELL_TYPE[1]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Part of a nested/multi-completion well\"\n```\n\n\n:::\n:::\n\n\n\n\nIf we wanted the `WELL_TYPE` entries 1 through 10, we can subset by a vector of the sequence from 1 through 10:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstations$WELL_TYPE[1:10]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Part of a nested/multi-completion well\"\n [2] \"Unknown\"                               \n [3] \"Unknown\"                               \n [4] \"Unknown\"                               \n [5] \"Unknown\"                               \n [6] \"Unknown\"                               \n [7] \"Unknown\"                               \n [8] \"Part of a nested/multi-completion well\"\n [9] \"Unknown\"                               \n[10] \"Unknown\"                               \n```\n\n\n:::\n:::\n\n\n\n\nSometimes it's helpful to count unique variables in a column, especially for categorical data such as the well type. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(stations$WELL_TYPE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nPart of a nested/multi-completion well                            Single Well \n                                  1778                                  12053 \n                               Unknown \n                                 29976 \n```\n\n\n:::\n:::\n\n\n\n\n\n<br>  \n\n### xlsx and xls (Excel files)\n\nExcel files are very common, and R has great utilities for reading in and processing excel files. [Calenviroscreen data](https://oehha.ca.gov/calenviroscreen) comes in excel format, which we can read in like so:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\nces <- read_xlsx(\"data/calenviroscreen/ces3results.xlsx\")\nhead(ces, 10) # print the first 10 rows\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Census Tract\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Total Population\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"California County\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"ZIP\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Nearby City \\r\\n(to help approximate location only)\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Longitude\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Latitude\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"CES 3.0 Score\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"CES 3.0 Percentile\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"CES 3.0 \\r\\nPercentile Range\"],\"name\":[10],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"SB 535 Disadvantaged Community\"],\"name\":[11],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Ozone\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Ozone Pctl\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"PM2.5\"],\"name\":[14],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"PM2.5 Pctl\"],\"name\":[15],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Diesel PM\"],\"name\":[16],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Diesel PM Pctl\"],\"name\":[17],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Drinking Water\"],\"name\":[18],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Drinking Water Pctl\"],\"name\":[19],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Pesticides\"],\"name\":[20],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Pesticides Pctl\"],\"name\":[21],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Tox. Release\"],\"name\":[22],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Tox. Release Pctl\"],\"name\":[23],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Traffic\"],\"name\":[24],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Traffic Pctl\"],\"name\":[25],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Cleanup Sites\"],\"name\":[26],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Cleanup Sites Pctl\"],\"name\":[27],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Groundwater Threats\"],\"name\":[28],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Groundwater Threats Pctl\"],\"name\":[29],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Haz. Waste\"],\"name\":[30],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Haz. Waste Pctl\"],\"name\":[31],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Imp. Water Bodies\"],\"name\":[32],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Imp. Water Bodies Pctl\"],\"name\":[33],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Solid Waste\"],\"name\":[34],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Solid Waste Pctl\"],\"name\":[35],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Pollution Burden\"],\"name\":[36],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Pollution Burden Score\"],\"name\":[37],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Pollution Burden Pctl\"],\"name\":[38],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Asthma\"],\"name\":[39],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Asthma Pctl\"],\"name\":[40],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Low Birth Weight\"],\"name\":[41],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Low Birth Weight Pctl\"],\"name\":[42],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Cardiovascular Disease\"],\"name\":[43],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Cardiovascular Disease Pctl\"],\"name\":[44],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Education\"],\"name\":[45],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Education Pctl\"],\"name\":[46],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Linguistic Isolation\"],\"name\":[47],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Linguistic Isolation Pctl\"],\"name\":[48],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Poverty\"],\"name\":[49],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Poverty Pctl\"],\"name\":[50],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Unemployment\"],\"name\":[51],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Unemployment Pctl\"],\"name\":[52],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Housing Burden\"],\"name\":[53],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Housing Burden Pctl\"],\"name\":[54],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Pop. Char.\"],\"name\":[55],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Pop. Char. Score\"],\"name\":[56],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Pop. Char. Pctl\"],\"name\":[57],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"6019001100\",\"2\":\"3174\",\"3\":\"Fresno\",\"4\":\"93706\",\"5\":\"Fresno\",\"6\":\"-119.7817\",\"7\":\"36.70970\",\"8\":\"94.09025\",\"9\":\"100.00000\",\"10\":\"95-100% (highest scores)\",\"11\":\"Yes\",\"12\":\"0.06488855\",\"13\":\"98.18295\",\"14\":\"15.40\",\"15\":\"97.21806\",\"16\":\"48.52381\",\"17\":\"95.54449\",\"18\":\"681.1956\",\"19\":\"80.91555\",\"20\":\"2.749604\",\"21\":\"47.81856\",\"22\":\"18551.9572\",\"23\":\"97.45572\",\"24\":\"909.14\",\"25\":\"62.977816769018702\",\"26\":\"80.50\",\"27\":\"98.66837\",\"28\":\"45.75\",\"29\":\"89.85435\",\"30\":\"0.795\",\"31\":\"84.31881\",\"32\":\"0\",\"33\":\"0.00000\",\"34\":\"21.75\",\"35\":\"97.80712\",\"36\":\"79.95878\",\"37\":\"9.848763\",\"38\":\"99.95022\",\"39\":\"131.64\",\"40\":\"97.66862\",\"41\":\"7.44\",\"42\":\"93.835704216327102\",\"43\":\"14.13\",\"44\":\"96.30969\",\"45\":\"53.3\",\"46\":\"95.760787282361804\",\"47\":\"16.2\",\"48\":\"77.509665377949602\",\"49\":\"76.3\",\"50\":\"97.12131\",\"51\":\"17.600000000000001\",\"52\":\"91.724838177433696\",\"53\":\"26\",\"54\":\"79.398324447829395\",\"55\":\"92.12049\",\"56\":\"9.553509\",\"57\":\"99.69731\"},{\"1\":\"6071001600\",\"2\":\"6133\",\"3\":\"San Bernardino\",\"4\":\"91761\",\"5\":\"Ontario\",\"6\":\"-117.6180\",\"7\":\"34.05778\",\"8\":\"90.67784\",\"9\":\"99.98739\",\"10\":\"95-100% (highest scores)\",\"11\":\"Yes\",\"12\":\"0.06216296\",\"13\":\"91.10143\",\"14\":\"13.31\",\"15\":\"93.63772\",\"16\":\"38.55634\",\"17\":\"92.12197\",\"18\":\"904.6576\",\"19\":\"96.10827\",\"20\":\"1.365360\",\"21\":\"41.34349\",\"22\":\"7494.2366\",\"23\":\"89.04964\",\"24\":\"782.26\",\"25\":\"55.658603835067098\",\"26\":\"66.20\",\"27\":\"97.68333\",\"28\":\"36.00\",\"29\":\"85.56769\",\"30\":\"1.250\",\"31\":\"88.76738\",\"32\":\"5\",\"33\":\"55.00774\",\"34\":\"12.00\",\"35\":\"92.17166\",\"36\":\"81.18663\",\"37\":\"10.000000\",\"38\":\"100.00000\",\"39\":\"60.66\",\"40\":\"69.77933\",\"41\":\"7.04\",\"42\":\"90.849673202614397\",\"43\":\"12.94\",\"44\":\"92.65678\",\"45\":\"53.3\",\"46\":\"95.760787282361804\",\"47\":\"33.4\",\"48\":\"96.253832822290406\",\"49\":\"72.5\",\"50\":\"94.63231\",\"51\":\"12.3\",\"52\":\"71.823835512120795\",\"53\":\"34.1\",\"54\":\"93.754760091393706\",\"55\":\"87.43685\",\"56\":\"9.067784\",\"57\":\"98.10821\"},{\"1\":\"6019000200\",\"2\":\"3167\",\"3\":\"Fresno\",\"4\":\"93706\",\"5\":\"Fresno\",\"6\":\"-119.8055\",\"7\":\"36.73549\",\"8\":\"85.97004\",\"9\":\"99.97478\",\"10\":\"95-100% (highest scores)\",\"11\":\"Yes\",\"12\":\"0.06216296\",\"13\":\"91.10143\",\"14\":\"15.40\",\"15\":\"97.21806\",\"16\":\"47.44521\",\"17\":\"95.42004\",\"18\":\"681.1956\",\"19\":\"80.91555\",\"20\":\"3.025629\",\"21\":\"48.75346\",\"22\":\"12454.9484\",\"23\":\"95.42280\",\"24\":\"576.52\",\"25\":\"39.002381250783301\",\"26\":\"22.00\",\"27\":\"85.13316\",\"28\":\"30.25\",\"29\":\"81.92651\",\"30\":\"0.200\",\"31\":\"60.50046\",\"32\":\"0\",\"33\":\"0.00000\",\"34\":\"2.50\",\"35\":\"57.17991\",\"36\":\"71.15731\",\"37\":\"8.764659\",\"38\":\"99.00436\",\"39\":\"142.12\",\"40\":\"98.32939\",\"41\":\"10.16\",\"42\":\"99.7821350762527\",\"43\":\"14.96\",\"44\":\"97.66862\",\"45\":\"42.3\",\"46\":\"89.061317183951502\",\"47\":\"16.7\",\"48\":\"78.389548060258605\",\"49\":\"86.8\",\"50\":\"99.56003\",\"51\":\"16.100000000000001\",\"52\":\"87.980708211701995\",\"53\":\"40.1\",\"54\":\"97.854785478547896\",\"55\":\"94.58133\",\"56\":\"9.808714\",\"57\":\"99.98739\"},{\"1\":\"6077000801\",\"2\":\"6692\",\"3\":\"San Joaquin\",\"4\":\"95203\",\"5\":\"Stockton\",\"6\":\"-121.3145\",\"7\":\"37.94052\",\"8\":\"82.49152\",\"9\":\"99.96216\",\"10\":\"95-100% (highest scores)\",\"11\":\"Yes\",\"12\":\"0.04617830\",\"13\":\"53.01805\",\"14\":\"12.54\",\"15\":\"84.01946\",\"16\":\"24.11704\",\"17\":\"73.51587\",\"18\":\"278.7562\",\"19\":\"29.11313\",\"20\":\"12.926266\",\"21\":\"60.56094\",\"22\":\"2387.7829\",\"23\":\"69.96757\",\"24\":\"1305.01\",\"25\":\"78.293019175335303\",\"26\":\"50.10\",\"27\":\"96.09632\",\"28\":\"132.10\",\"29\":\"98.41112\",\"30\":\"0.795\",\"31\":\"84.31881\",\"32\":\"19\",\"33\":\"98.62923\",\"34\":\"27.00\",\"35\":\"99.10398\",\"36\":\"74.48378\",\"37\":\"9.174390\",\"38\":\"99.58930\",\"39\":\"142.17\",\"40\":\"98.34185\",\"41\":\"6.23\",\"42\":\"80.648468537741905\",\"43\":\"14.72\",\"44\":\"97.16993\",\"45\":\"40.799999999999997\",\"46\":\"87.522079232904403\",\"47\":\"15.3\",\"48\":\"75.136648446873707\",\"49\":\"61.3\",\"50\":\"85.56882\",\"51\":\"19.600000000000001\",\"52\":\"94.973981469729694\",\"53\":\"21.1\",\"54\":\"63.544046712363503\",\"55\":\"86.70127\",\"56\":\"8.991499\",\"57\":\"97.71724\"},{\"1\":\"6019001500\",\"2\":\"2206\",\"3\":\"Fresno\",\"4\":\"93725\",\"5\":\"Fresno\",\"6\":\"-119.7178\",\"7\":\"36.68160\",\"8\":\"82.03081\",\"9\":\"99.94955\",\"10\":\"95-100% (highest scores)\",\"11\":\"Yes\",\"12\":\"0.06488855\",\"13\":\"98.18295\",\"14\":\"15.40\",\"15\":\"97.21806\",\"16\":\"18.84594\",\"17\":\"58.22029\",\"18\":\"1000.2408\",\"19\":\"98.64039\",\"20\":\"3518.413336\",\"21\":\"95.15235\",\"22\":\"21790.7067\",\"23\":\"98.15415\",\"24\":\"435.16\",\"25\":\"24.3012908885825\",\"26\":\"60.00\",\"27\":\"97.15432\",\"28\":\"54.20\",\"29\":\"92.08871\",\"30\":\"13.100\",\"31\":\"99.70343\",\"32\":\"0\",\"33\":\"0.00000\",\"34\":\"50.80\",\"35\":\"99.90568\",\"36\":\"80.19676\",\"37\":\"9.878075\",\"38\":\"99.98755\",\"39\":\"90.48\",\"40\":\"89.53996\",\"41\":\"4.5\",\"42\":\"38.920927848263503\",\"43\":\"12.82\",\"44\":\"92.35756\",\"45\":\"45.1\",\"46\":\"91.130456724703507\",\"47\":\"14.7\",\"48\":\"73.723503532862296\",\"49\":\"66.4\",\"50\":\"90.23256\",\"51\":\"18.600000000000001\",\"52\":\"93.654017007234401\",\"53\":\"28.1\",\"54\":\"83.980705762884\",\"55\":\"80.07520\",\"56\":\"8.304332\",\"57\":\"92.76075\"},{\"1\":\"6037204920\",\"2\":\"2598\",\"3\":\"Los Angeles\",\"4\":\"90023\",\"5\":\"Los Angeles\",\"6\":\"-118.1975\",\"7\":\"34.01750\",\"8\":\"80.72687\",\"9\":\"99.93694\",\"10\":\"95-100% (highest scores)\",\"11\":\"Yes\",\"12\":\"0.04617830\",\"13\":\"53.01805\",\"14\":\"12.89\",\"15\":\"92.88922\",\"16\":\"56.52000\",\"17\":\"96.97573\",\"18\":\"714.4778\",\"19\":\"83.48509\",\"20\":\"0.000000\",\"21\":\"0.00000\",\"22\":\"39040.1799\",\"23\":\"99.30157\",\"24\":\"2943.44\",\"25\":\"97.192630655470595\",\"26\":\"36.70\",\"27\":\"93.14119\",\"28\":\"25.00\",\"29\":\"77.29229\",\"30\":\"4.930\",\"31\":\"96.31140\",\"32\":\"7\",\"33\":\"71.61176\",\"34\":\"3.85\",\"35\":\"65.66847\",\"36\":\"76.73142\",\"37\":\"9.451238\",\"38\":\"99.87554\",\"39\":\"68.74\",\"40\":\"77.63371\",\"41\":\"7.35\",\"42\":\"93.2077406125849\",\"43\":\"10.40\",\"44\":\"77.62124\",\"45\":\"53.1\",\"46\":\"95.672470350744405\",\"47\":\"23.7\",\"48\":\"89.148113584855395\",\"49\":\"66.4\",\"50\":\"90.23256\",\"51\":\"11.6\",\"52\":\"67.419723315141496\",\"53\":\"22\",\"54\":\"67.034780401117004\",\"55\":\"82.36121\",\"56\":\"8.541407\",\"57\":\"94.89217\"},{\"1\":\"6077000300\",\"2\":\"2396\",\"3\":\"San Joaquin\",\"4\":\"95203\",\"5\":\"Stockton\",\"6\":\"-121.3021\",\"7\":\"37.95242\",\"8\":\"80.17894\",\"9\":\"99.92433\",\"10\":\"95-100% (highest scores)\",\"11\":\"Yes\",\"12\":\"0.04617830\",\"13\":\"53.01805\",\"14\":\"13.44\",\"15\":\"93.99950\",\"16\":\"21.76039\",\"17\":\"66.48413\",\"18\":\"278.7562\",\"19\":\"29.11313\",\"20\":\"172.488738\",\"21\":\"79.18975\",\"22\":\"707.5362\",\"23\":\"56.11125\",\"24\":\"885.52\",\"25\":\"61.937586163679697\",\"26\":\"89.70\",\"27\":\"98.88727\",\"28\":\"149.05\",\"29\":\"98.74214\",\"30\":\"0.135\",\"31\":\"50.67655\",\"32\":\"14\",\"33\":\"94.40637\",\"34\":\"2.30\",\"35\":\"52.98279\",\"36\":\"68.27047\",\"37\":\"8.409079\",\"38\":\"98.07094\",\"39\":\"169.56\",\"40\":\"99.36417\",\"41\":\"8.36\",\"42\":\"97.859797513776698\",\"43\":\"12.70\",\"44\":\"91.68433\",\"45\":\"46\",\"46\":\"91.723441836992194\",\"47\":\"27.1\",\"48\":\"92.401013198240193\",\"49\":\"76.2\",\"50\":\"97.03331\",\"51\":\"14.4\",\"52\":\"82.002792232516796\",\"53\":\"24.3\",\"54\":\"74.727088093424697\",\"55\":\"91.94015\",\"56\":\"9.534806\",\"57\":\"99.64687\"},{\"1\":\"6019001000\",\"2\":\"4106\",\"3\":\"Fresno\",\"4\":\"93706\",\"5\":\"Fresno\",\"6\":\"-119.8043\",\"7\":\"36.69775\",\"8\":\"80.13482\",\"9\":\"99.91172\",\"10\":\"95-100% (highest scores)\",\"11\":\"Yes\",\"12\":\"0.06488855\",\"13\":\"98.18295\",\"14\":\"15.40\",\"15\":\"97.21806\",\"16\":\"20.84831\",\"17\":\"64.14437\",\"18\":\"788.0202\",\"19\":\"89.12311\",\"20\":\"1435.925031\",\"21\":\"90.89335\",\"22\":\"6996.9624\",\"23\":\"88.06436\",\"24\":\"243.54\",\"25\":\"7.9709236746459498\",\"26\":\"15.45\",\"27\":\"77.59942\",\"28\":\"20.00\",\"29\":\"71.06918\",\"30\":\"0.000\",\"31\":\"0.00000\",\"32\":\"0\",\"33\":\"0.00000\",\"34\":\"10.00\",\"35\":\"89.46003\",\"36\":\"66.88449\",\"37\":\"8.238363\",\"38\":\"97.34910\",\"39\":\"142.28\",\"40\":\"98.41666\",\"41\":\"7.83\",\"42\":\"95.911828783801099\",\"43\":\"14.96\",\"44\":\"97.66862\",\"45\":\"47.4\",\"46\":\"92.581377744133206\",\"47\":\"15.8\",\"48\":\"76.576456472470298\",\"49\":\"74.5\",\"50\":\"95.90195\",\"51\":\"20\",\"52\":\"95.494352075136405\",\"53\":\"31.8\",\"54\":\"90.720995176440695\",\"55\":\"93.79370\",\"56\":\"9.727032\",\"57\":\"99.91172\"},{\"1\":\"6037206050\",\"2\":\"2146\",\"3\":\"Los Angeles\",\"4\":\"90023\",\"5\":\"Los Angeles\",\"6\":\"-118.2245\",\"7\":\"34.02990\",\"8\":\"79.02529\",\"9\":\"99.89910\",\"10\":\"95-100% (highest scores)\",\"11\":\"Yes\",\"12\":\"0.04617830\",\"13\":\"53.01805\",\"14\":\"12.89\",\"15\":\"92.88922\",\"16\":\"53.95780\",\"17\":\"96.41568\",\"18\":\"664.0691\",\"19\":\"78.57054\",\"20\":\"0.000000\",\"21\":\"0.00000\",\"22\":\"10378.2365\",\"23\":\"94.06336\",\"24\":\"2810.82\",\"25\":\"96.628650206792798\",\"26\":\"36.05\",\"27\":\"92.95877\",\"28\":\"16.25\",\"29\":\"63.80338\",\"30\":\"10.025\",\"31\":\"99.12882\",\"32\":\"7\",\"33\":\"71.61176\",\"34\":\"22.10\",\"35\":\"98.01934\",\"36\":\"77.09057\",\"37\":\"9.495476\",\"38\":\"99.90044\",\"39\":\"58.03\",\"40\":\"66.52537\",\"41\":\"6.71\",\"42\":\"87.504805843906198\",\"43\":\"7.24\",\"44\":\"40.55604\",\"45\":\"50.4\",\"46\":\"94.360333080999297\",\"47\":\"35.700000000000003\",\"48\":\"97.120383948806804\",\"49\":\"75.7\",\"50\":\"96.64362\",\"51\":\"28.5\",\"52\":\"99.505013326564296\",\"53\":\"31.7\",\"54\":\"90.555978674790595\",\"55\":\"80.24957\",\"56\":\"8.322415\",\"57\":\"92.96254\"},{\"1\":\"6019000400\",\"2\":\"6343\",\"3\":\"Fresno\",\"4\":\"93721\",\"5\":\"Fresno\",\"6\":\"-119.7762\",\"7\":\"36.72766\",\"8\":\"78.52985\",\"9\":\"99.88649\",\"10\":\"95-100% (highest scores)\",\"11\":\"Yes\",\"12\":\"0.06488855\",\"13\":\"98.18295\",\"14\":\"15.40\",\"15\":\"97.21806\",\"16\":\"54.35616\",\"17\":\"96.73927\",\"18\":\"681.1956\",\"19\":\"80.91555\",\"20\":\"114.959620\",\"21\":\"76.83518\",\"22\":\"125383.8920\",\"23\":\"99.92517\",\"24\":\"815.36\",\"25\":\"57.9646572252162\",\"26\":\"15.95\",\"27\":\"78.23787\",\"28\":\"13.50\",\"29\":\"57.59682\",\"30\":\"0.755\",\"31\":\"83.83689\",\"32\":\"0\",\"33\":\"0.00000\",\"34\":\"0.50\",\"35\":\"20.49045\",\"36\":\"73.89469\",\"37\":\"9.101830\",\"38\":\"99.47729\",\"39\":\"107.80\",\"40\":\"94.22765\",\"41\":\"4.79\",\"42\":\"46.469306676919103\",\"43\":\"14.75\",\"44\":\"97.25720\",\"45\":\"52.5\",\"46\":\"95.319202624274496\",\"47\":\"13.7\",\"48\":\"71.3504866017864\",\"49\":\"83.4\",\"50\":\"99.08234\",\"51\":\"23.5\",\"52\":\"98.273892625967804\",\"53\":\"23.2\",\"54\":\"71.337903021071298\",\"55\":\"83.19541\",\"56\":\"8.627918\",\"57\":\"95.71194\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\nBy default, `read_xlsx()` reads in the first sheet. However, there may be many sheets in an excel file. If we want to read in a different sheet, we can tell R which sheet to read in, and even how many lines to skip before reading in data. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmetadata <- read_xlsx(\"data/calenviroscreen/ces3results.xlsx\", \n                      sheet = 2, \n                      skip  = 6)\nmetadata\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Variable Name\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Description\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"CalEnviroScreen Category\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"Census Tract\",\"2\":\"Census Tract ID from 2010 Census\",\"3\":\"NA\"},{\"1\":\"Total Population\",\"2\":\"2010 population in census tracts\",\"3\":\"NA\"},{\"1\":\"California County\",\"2\":\"California county that the census tract falls within\",\"3\":\"NA\"},{\"1\":\"ZIP\",\"2\":\"Postal ZIP Code that the census tract falls within\",\"3\":\"NA\"},{\"1\":\"Nearby City \\\\r\\\\n(to help approximate location only)\",\"2\":\"City or nearby city the  census tract falls within\",\"3\":\"NA\"},{\"1\":\"Longitude\",\"2\":\"Longitude of the centroid of the census tract\",\"3\":\"NA\"},{\"1\":\"Latitude\",\"2\":\"Latitude of the centroid of the census tract\",\"3\":\"NA\"},{\"1\":\"CES 3.0 Score\",\"2\":\"CalEnviroScreen Score, Pollution Score multiplied by Population Characteristics Score\",\"3\":\"NA\"},{\"1\":\"CES 3.0 Percentile\",\"2\":\"Percentile of the CalEnviroScreen score\",\"3\":\"NA\"},{\"1\":\"CES 3.0 Percentile Range\",\"2\":\"Percentile of the CalEnviroScreen score, grouped by 5% increments\",\"3\":\"NA\"},{\"1\":\"SB 535 Disadvantaged Community\",\"2\":\"Disadvantaged communities list from:\\\\r\\\\nhttps://oehha.ca.gov/calenviroscreen/sb535\\\\r\\\\nhttp://www.calepa.ca.gov/EnvJustice/GHGInvest/\",\"3\":\"NA\"},{\"1\":\"Ozone\",\"2\":\"Amount of daily maximum 8 hour Ozone concentration\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"Ozone Pctl\",\"2\":\"Ozone percentile\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"PM2.5\",\"2\":\"Annual mean PM 2.5 concentrations\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"PM2.5 Pctl\",\"2\":\"PM2.5 percentile\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"Diesel PM\",\"2\":\"Diesel PM emissions from on-road and non-road sources\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"Diesel PM Pctl\",\"2\":\"Diesel PM percentile\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"Drinking Water\",\"2\":\"Drinking water contaminant index for selected contaminants\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"Drinking Water Pctl\",\"2\":\"Drinking water percentile\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"Pesticides\",\"2\":\"Total pounds of selected active pesticide ingredients (filtered for hazard and volatility) used in production-agriculture per square mile in the census tract\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"Pesticides Pctl\",\"2\":\"Pesticides percentile\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"Tox. Release\",\"2\":\"Toxicity-weighted concentrations of modeled chemical releases to air from facility emissions and off-site incineration (from RSEI)\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"Tox. Release Pctl\",\"2\":\"Toxic release percentile\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"Traffic\",\"2\":\"Traffic density, in vehicle-kilometers per hour per road length, within 150 meters of the census tract boundary\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"Traffic Pctl\",\"2\":\"Traffic percentile\",\"3\":\"Pollution Burden (Exposures Indicator)\"},{\"1\":\"Cleanup Sites\",\"2\":\"Cleanup sites, sum of weighted EnviroStor cleanup sites within buffered distances to populated blocks of census tracts\",\"3\":\"Pollution Burden (Environmental Effects Indicator)\"},{\"1\":\"Cleanup Sites Pctl\",\"2\":\"Cleanup sites percentile\",\"3\":\"Pollution Burden (Environmental Effects Indicator)\"},{\"1\":\"Groundwater Threats\",\"2\":\"Groundwater threats, sum of weighted GeoTracker leaking underground storage tank sites  within buffered distances to populated blocks of census tracts\",\"3\":\"Pollution Burden (Environmental Effects Indicator)\"},{\"1\":\"Groundwater Threats Pctl\",\"2\":\"Groundwater threats percentile\",\"3\":\"Pollution Burden (Environmental Effects Indicator)\"},{\"1\":\"Haz. Waste\",\"2\":\"Sum of weighted hazardous waste facilities and large quantity generators within buffered distances to populated blocks of census tracts\",\"3\":\"Pollution Burden (Environmental Effects Indicator)\"},{\"1\":\"Haz. Waste Pctl\",\"2\":\"Hazardous waste percentile\",\"3\":\"Pollution Burden (Environmental Effects Indicator)\"},{\"1\":\"Imp. Water Bodies\",\"2\":\"Impaired water bodies, sum of number of pollutants across all impaired water bodies within buffered distances to populated blocks of census tracts\",\"3\":\"Pollution Burden (Environmental Effects Indicator)\"},{\"1\":\"Imp. Water Bodies Pctl\",\"2\":\"Impaired water bodies percentile\",\"3\":\"Pollution Burden (Environmental Effects Indicator)\"},{\"1\":\"Solid Waste\",\"2\":\"Sum of weighted solid waste sites and facilities (SWIS) within  buffered distances to populated blocks of census tracts\",\"3\":\"Pollution Burden (Environmental Effects Indicator)\"},{\"1\":\"Solid Waste Pctl\",\"2\":\"Solid waste percentile\",\"3\":\"Pollution Burden (Environmental Effects Indicator)\"},{\"1\":\"Pollution Burden\",\"2\":\"Average of percentiles from the Pollution Burden indicators (with a half weighting for the Environmental Effects indicators)\",\"3\":\"NA\"},{\"1\":\"Pollution Burden Score\",\"2\":\"Pollution Burden variable scaled with a range of 0-10. (Used to calculate CES 3.0 Score)\",\"3\":\"NA\"},{\"1\":\"Pollution Burden Pctl\",\"2\":\"Pollution burden percentile\",\"3\":\"NA\"},{\"1\":\"Asthma\",\"2\":\"Age-adjusted rate of emergency department visits for asthma\",\"3\":\"Population Characteristics (Sensitive Populations)\"},{\"1\":\"Asthma Pctl\",\"2\":\"Asthma percentile\",\"3\":\"Population Characteristics (Sensitive Populations)\"},{\"1\":\"Low Birth Weight\",\"2\":\"Percent low birth weight\",\"3\":\"Population Characteristics (Sensitive Populations)\"},{\"1\":\"Low Birth Weight Pctl\",\"2\":\"Low birth weight percentile\",\"3\":\"Population Characteristics (Sensitive Populations)\"},{\"1\":\"Cardiovascular Disease\",\"2\":\"Age-adjusted rate of emergency department visits for heart attacks per 10,000\",\"3\":\"Population Characteristics (Sensitive Populations)\"},{\"1\":\"Cardiovascular Disease Pctl\",\"2\":\"Cardiovascular disease percentile\",\"3\":\"Population Characteristics (Sensitive Populations)\"},{\"1\":\"Education\",\"2\":\"Percent of population over 25 with less than a high school education\",\"3\":\"Population Characteristics (Socioeconomic Factors)\"},{\"1\":\"Education Pctl\",\"2\":\"Education percentile\",\"3\":\"Population Characteristics (Socioeconomic Factors)\"},{\"1\":\"Linguistic Isolation\",\"2\":\"Percent limited English speaking households\",\"3\":\"Population Characteristics (Socioeconomic Factors)\"},{\"1\":\"Linguistic Isolation Pctl\",\"2\":\"Linguistic isolation percentile\",\"3\":\"Population Characteristics (Socioeconomic Factors)\"},{\"1\":\"Poverty\",\"2\":\"Percent of population living below two times the federal poverty level\",\"3\":\"Population Characteristics (Socioeconomic Factors)\"},{\"1\":\"Poverty\",\"2\":\"Poverty percentile\",\"3\":\"Population Characteristics (Socioeconomic Factors)\"},{\"1\":\"Unemployment\",\"2\":\"Percent of the population over the age of 16 that is unemployed and eligible for the labor force\",\"3\":\"Population Characteristics (Socioeconomic Factors)\"},{\"1\":\"Unemployment Pctl\",\"2\":\"Unemployment percentile\",\"3\":\"Population Characteristics (Socioeconomic Factors)\"},{\"1\":\"Housing Burden\",\"2\":\"Percent housing burdened low income households\",\"3\":\"Population Characteristics (Socioeconomic Factors)\"},{\"1\":\"Housing Burden Pctl\",\"2\":\"Housing burden percentile\",\"3\":\"Population Characteristics (Socioeconomic Factors)\"},{\"1\":\"Pop. Char.\",\"2\":\"Average of percentiles from the Population Characteristics indicators\",\"3\":\"NA\"},{\"1\":\"Pop. Char. Score\",\"2\":\"Population Characteristics variable scaled with a range of 0-10. (Used to calculate CES 3.0 Score)\",\"3\":\"NA\"},{\"1\":\"Pop. Char. Score Pctl\",\"2\":\"Population characteristics percentile\",\"3\":\"NA\"},{\"1\":\"NA\",\"2\":\"NA\",\"3\":\"NA\"},{\"1\":\"NA\",\"2\":\"NA\",\"3\":\"NA\"},{\"1\":\"NA\",\"2\":\"NA\",\"3\":\"NA\"},{\"1\":\"NA\",\"2\":\"NA\",\"3\":\"NA\"},{\"1\":\"NA\",\"2\":\"NA\",\"3\":\"NA\"},{\"1\":\"NA\",\"2\":\"NA\",\"3\":\"NA\"},{\"1\":\"NA\",\"2\":\"NA\",\"3\":\"NA\"},{\"1\":\"NA\",\"2\":\"NA\",\"3\":\"NA\"},{\"1\":\"NA\",\"2\":\"NA\",\"3\":\"NA\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n\n\n:::challenge\n\n<font color=\"#009E73\">**Challenge 1**</font> \n\n1. open the documentation for `read_xlsx()` using `?` (Hint: type `?read_xlsx` in the console and hit enter)\n2. read through the Arguments to get a sense of what else the function can do\n3. Read in the \"Index Summary\" sheet of `\"data/healthy_watersheds/CA_PHWA_TabularResults_170518.xlsx\"`, and select the appropriate number of rows to skip. \n4. What happened to column names during the read? \n\n:::\n\n<br>\n\n<details>\n  <summary class=\"challenge-ans-title\"><font color=\"#0072B2\">**Click for Answers!**</font></summary>\n  <div class=\"challenge-ans-body\">\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhealth <- read_xlsx(\"data/healthy_watersheds/CA_PHWA_TabularResults_170518.xlsx\", \n                    sheet = 2, \n                    skip  = 4)\nhead(health)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Watershed Name\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"HUC12\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"ECOREGION\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"STATE\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Score...5\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Percentile...6\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Score...7\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Percentile...8\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Top 10%\"],\"name\":[9],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Top 25%\"],\"name\":[10],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Score...11\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Percentile...12\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Score...13\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Percentile...14\"],\"name\":[14],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Red Spring-Colorado River\",\"2\":\"150301010307\",\"3\":\"14\",\"4\":\"CA\",\"5\":\"0.8658638\",\"6\":\"57.19862\",\"7\":\"0.6161828\",\"8\":\"4.074980\",\"9\":\"No\",\"10\":\"No\",\"11\":\"0.12751029\",\"12\":\"23.03100\",\"13\":\"0.2255298\",\"14\":\"86.63407\"},{\"1\":\"Shadow Canyon\",\"2\":\"150301010401\",\"3\":\"14\",\"4\":\"CA\",\"5\":\"0.8606941\",\"6\":\"55.01722\",\"7\":\"0.8232091\",\"8\":\"26.568867\",\"9\":\"No\",\"10\":\"No\",\"11\":\"0.12594048\",\"12\":\"22.75545\",\"13\":\"0.1358056\",\"14\":\"67.31866\"},{\"1\":\"Eagle Pass\",\"2\":\"150301010402\",\"3\":\"14\",\"4\":\"CA\",\"5\":\"0.8435869\",\"6\":\"49.43743\",\"7\":\"0.7229917\",\"8\":\"9.616952\",\"9\":\"No\",\"10\":\"No\",\"11\":\"0.12613537\",\"12\":\"22.82434\",\"13\":\"0.1405179\",\"14\":\"69.03015\"},{\"1\":\"Mohave Valley-Colorado River\",\"2\":\"150301010405\",\"3\":\"14\",\"4\":\"CA\",\"5\":\"0.8110406\",\"6\":\"42.38806\",\"7\":\"0.5386618\",\"8\":\"2.363488\",\"9\":\"No\",\"10\":\"No\",\"11\":\"0.16976557\",\"12\":\"27.71527\",\"13\":\"0.2648348\",\"14\":\"89.56805\"},{\"1\":\"Monumental Pass\",\"2\":\"150301010406\",\"3\":\"14\",\"4\":\"CA\",\"5\":\"0.8787584\",\"6\":\"63.19173\",\"7\":\"0.7843851\",\"8\":\"16.544417\",\"9\":\"No\",\"10\":\"No\",\"11\":\"0.10395629\",\"12\":\"19.38002\",\"13\":\"0.1145273\",\"14\":\"59.82070\"},{\"1\":\"Lobecks Pass\",\"2\":\"150301010408\",\"3\":\"14\",\"4\":\"CA\",\"5\":\"0.8552907\",\"6\":\"53.11137\",\"7\":\"0.7445450\",\"8\":\"11.572942\",\"9\":\"No\",\"10\":\"No\",\"11\":\"0.09702473\",\"12\":\"17.52009\",\"13\":\"0.1045193\",\"14\":\"54.84923\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\nSome column names during the read were renamed because they're the same in the Excel sheet. In R, a data.frame can have only one unique name per column -- duplicate names aren't allowed! Thus, R renamed those duplicate names. In a later module, we will see how to rename columns within R.\n\n  </div>\n</details>\n\n\n<br>\n\n### shp (ArcGIS shapefiles)\n\nGeospatial data is ubiquitous. So is the ArcGIS data format, the shapefile. A georeferenced shapefile is, at minimum made of 4 files: `.shp`, `.prj`, `.dbf`, and `.shx`. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# unzip Sacramento county shapefile\nunzip(\"data/shp/sac_county.zip\", exdir = \"data/shp/sac\")\n\n# read the shapefile\nlibrary(sf)\nsac_county <- st_read(\"data/shp/sac/sac_county.shp\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `sac_county' from data source \n  `/Users/richpauloo/Documents/GitHub/r4wrds/quarto-book/intro/data/shp/sac/sac_county.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 1 feature and 9 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: -13565710 ymin: 4582007 xmax: -13472670 ymax: 4683976\nProjected CRS: WGS 84 / Pseudo-Mercator\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nggplot(sac_county) + geom_sf()\n```\n\n::: {.cell-output-display}\n![](m_importing_and_exporting_data_files/figure-html/plot-sac-1.png){width=672}\n:::\n:::\n\n\n\n\n\n### dbf\n\n`.dbf` files are one kind of database file. If you've ever opened a shapefile with attribute information, you've used a `.dbf` file. The `foreign` package allows us to read `.dbf` files into R. Since this is a new package, we need to install it with `install.packages(\"foreign\")`. \n\nWe've been loading entire packages with the `library()` function, but you can also call a function from a package without loading it by using `<package_name>::<function_name>` syntax. Let's load the `.dbf` file from our Sacramento County polygon.  \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nforeign::read.dbf(\"data/shp/sac/sac_county.dbf\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"OBJECTID\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"COUNTY_NAM\"],\"name\":[2],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"COUNTY_ABB\"],\"name\":[3],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"COUNTY_NUM\"],\"name\":[4],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"COUNTY_COD\"],\"name\":[5],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"COUNTY_FIP\"],\"name\":[6],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Shape\"],\"name\":[7],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Shape.STAr\"],\"name\":[8],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Shape.STLe\"],\"name\":[9],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"geometry\"],\"name\":[10],\"type\":[\"fct\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"34\",\"2\":\"Sacramento County\",\"3\":\"SAC\",\"4\":\"34\",\"5\":\"34\",\"6\":\"067\",\"7\":\"Polygon\",\"8\":\"4203503574.269531\",\"9\":\"406962.476293\",\"10\":\"NA\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n\n### rds and .rda\n\n`.rds` and `.rda` (`.rda` is shorthand for `.RData`) are a special R-based data formats used to store R objects. These files can be read just like another other import functions shown above. Let's use it to import the groundwater level station data we read in earlier. Note that a `.rds` file can hold any single R object.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstations <- read_rds(\"data/gwl/stations.rds\")\nhead(stations)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"STN_ID\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"SITE_CODE\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"SWN\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WELL_NAME\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"LATITUDE\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"LONGITUDE\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WLM_METHOD\"],\"name\":[7],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WLM_ACC\"],\"name\":[8],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"BASIN_CODE\"],\"name\":[9],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"BASIN_NAME\"],\"name\":[10],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"COUNTY_NAME\"],\"name\":[11],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WELL_DEPTH\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WELL_USE\"],\"name\":[13],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WELL_TYPE\"],\"name\":[14],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WCR_NO\"],\"name\":[15],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"51445\",\"2\":\"320000N1140000W001\",\"3\":\"NA\",\"4\":\"Bay Ridge\",\"5\":\"35.5604\",\"6\":\"-121.755\",\"7\":\"USGS quad\",\"8\":\"Unknown\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"Monterey\",\"12\":\"NA\",\"13\":\"Residential\",\"14\":\"Part of a nested/multi-completion well\",\"15\":\"NA\"},{\"1\":\"25067\",\"2\":\"325450N1171061W001\",\"3\":\"19S02W05K003S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\"},{\"1\":\"25068\",\"2\":\"325450N1171061W002\",\"3\":\"19S02W05K004S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\"},{\"1\":\"39833\",\"2\":\"325450N1171061W003\",\"3\":\"19S02W05K005S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\"},{\"1\":\"25069\",\"2\":\"325450N1171061W004\",\"3\":\"19S02W05K006S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\"},{\"1\":\"38479\",\"2\":\"325450N1171061W005\",\"3\":\"19S02W05K007S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\nSometimes, you may create an intermediate result that is time-consuming to recreate from scratch each time, and you want to save that intermediate result to streamline future analyses. You can export, or write this object to any number of data formats like a csv, SQL database, or shapefile. Unlike these data formats however, data saved as `.rds` are saved as one of R's object classes, like data.frame, vector, list, and so on. In practice, only R is used to read `.rds` and `.rda` files, so these formats are chosen when we expect to use R to read these data at a later time.\n\nOne quick difference between `.rds` and `.rda` files, for `.rds` files we can only store a single R object (of any kind). For an `.rda` file, we can store **many**. `.rda` are also compressed by default. There are pros and cons we will discuss later.\n\n\n### sqlite\n\nSQLite is an open-source database format based on SQL that's useful for storing large datasets locally on your computer. The methods to connect to a SQLite database, list tables, read tables, and send queries are similar across other cloud databases you may encounter in the wild, like [Postgres](https://rpostgres.r-dbi.org/), and enterprise database systems like Microsoft Access. We use the `here` package to construct relative paths in the RProject.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(RSQLite)\nlibrary(here)\n# location of an sqlite database\ndbpath <- here(\"data/gwl/gwl_data.sqlite\")\n\n# actually connect to the database\ndbcon <- dbConnect(dbDriver(\"SQLite\"), dbpath)\n\n# list all the tables in the database\ndbListTables(dbcon)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"measurements_sep\" \"perforations\"     \"stations\"        \n```\n\n\n:::\n\n```{.r .cell-code}\n# get one of the tables into a dataframe\nhead(dbReadTable(dbcon, \"stations\"))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"STN_ID\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"SITE_CODE\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"SWN\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WELL_NAME\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"LATITUDE\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"LONGITUDE\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WLM_METHOD\"],\"name\":[7],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WLM_ACC\"],\"name\":[8],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"BASIN_CODE\"],\"name\":[9],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"BASIN_NAME\"],\"name\":[10],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"COUNTY_NAME\"],\"name\":[11],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WELL_DEPTH\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WELL_USE\"],\"name\":[13],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WELL_TYPE\"],\"name\":[14],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WCR_NO\"],\"name\":[15],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"51445\",\"2\":\"320000N1140000W001\",\"3\":\"NA\",\"4\":\"Bay Ridge\",\"5\":\"35.5604\",\"6\":\"-121.755\",\"7\":\"USGS quad\",\"8\":\"Unknown\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"Monterey\",\"12\":\"NA\",\"13\":\"Residential\",\"14\":\"Part of a nested/multi-completion well\",\"15\":\"NA\",\"_rn_\":\"1\"},{\"1\":\"25067\",\"2\":\"325450N1171061W001\",\"3\":\"19S02W05K003S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\",\"_rn_\":\"2\"},{\"1\":\"25068\",\"2\":\"325450N1171061W002\",\"3\":\"19S02W05K004S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\",\"_rn_\":\"3\"},{\"1\":\"39833\",\"2\":\"325450N1171061W003\",\"3\":\"19S02W05K005S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\",\"_rn_\":\"4\"},{\"1\":\"25069\",\"2\":\"325450N1171061W004\",\"3\":\"19S02W05K006S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\",\"_rn_\":\"5\"},{\"1\":\"38479\",\"2\":\"325450N1171061W005\",\"3\":\"19S02W05K007S\",\"4\":\"NA\",\"5\":\"32.5450\",\"6\":\"-117.106\",\"7\":\"Unknown\",\"8\":\"Unknown\",\"9\":\"9-033\",\"10\":\"Coastal Plain Of San Diego\",\"11\":\"San Diego\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Unknown\",\"15\":\"NA\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nhead(dbReadTable(dbcon, \"measurements_sep\"))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"STN_ID\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"SITE_CODE\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WLM_ID\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MSMT_DATE\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WLM_RPE\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WLM_GSE\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RDNG_WS\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RDNG_RP\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WSE\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RPE_WSE\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"GSE_WSE\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WLM_QA_DESC\"],\"name\":[12],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WLM_DESC\"],\"name\":[13],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WLM_ACC_DESC\"],\"name\":[14],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WLM_ORG_ID\"],\"name\":[15],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WLM_ORG_NAME\"],\"name\":[16],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"MSMT_CMT\"],\"name\":[17],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"COOP_AGENCY_ORG_ID\"],\"name\":[18],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"COOP_ORG_NAME\"],\"name\":[19],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"4775\",\"2\":\"384931N1212618W001\",\"3\":\"1443624\",\"4\":\"2004-03-01\",\"5\":\"118.4\",\"6\":\"117.4\",\"7\":\"0\",\"8\":\"127.0\",\"9\":\"-8.6\",\"10\":\"127.0\",\"11\":\"126.0\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Water level accuracy is unknown\",\"15\":\"1\",\"16\":\"Department of Water Resources\",\"17\":\"NA\",\"18\":\"1074\",\"19\":\"SACRAMENTO MUNICIPAL UTILITY DISTRICT\",\"_rn_\":\"1\"},{\"1\":\"4775\",\"2\":\"384931N1212618W001\",\"3\":\"1443625\",\"4\":\"2003-10-01\",\"5\":\"118.4\",\"6\":\"117.4\",\"7\":\"0\",\"8\":\"121.7\",\"9\":\"-3.3\",\"10\":\"121.7\",\"11\":\"120.7\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Water level accuracy is unknown\",\"15\":\"1\",\"16\":\"Department of Water Resources\",\"17\":\"NA\",\"18\":\"1074\",\"19\":\"SACRAMENTO MUNICIPAL UTILITY DISTRICT\",\"_rn_\":\"2\"},{\"1\":\"4775\",\"2\":\"384931N1212618W001\",\"3\":\"1443622\",\"4\":\"2003-03-15\",\"5\":\"118.4\",\"6\":\"117.4\",\"7\":\"0\",\"8\":\"119.5\",\"9\":\"-1.1\",\"10\":\"119.5\",\"11\":\"118.5\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Water level accuracy is unknown\",\"15\":\"1\",\"16\":\"Department of Water Resources\",\"17\":\"NA\",\"18\":\"1074\",\"19\":\"SACRAMENTO MUNICIPAL UTILITY DISTRICT\",\"_rn_\":\"3\"},{\"1\":\"4775\",\"2\":\"384931N1212618W001\",\"3\":\"1443620\",\"4\":\"2002-10-01\",\"5\":\"118.4\",\"6\":\"117.4\",\"7\":\"0\",\"8\":\"128.9\",\"9\":\"-10.5\",\"10\":\"128.9\",\"11\":\"127.9\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Water level accuracy is unknown\",\"15\":\"1\",\"16\":\"Department of Water Resources\",\"17\":\"NA\",\"18\":\"1074\",\"19\":\"SACRAMENTO MUNICIPAL UTILITY DISTRICT\",\"_rn_\":\"4\"},{\"1\":\"4775\",\"2\":\"384931N1212618W001\",\"3\":\"1443621\",\"4\":\"2001-10-01\",\"5\":\"118.4\",\"6\":\"117.4\",\"7\":\"0\",\"8\":\"131.4\",\"9\":\"-13.0\",\"10\":\"131.4\",\"11\":\"130.4\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Water level accuracy is unknown\",\"15\":\"1\",\"16\":\"Department of Water Resources\",\"17\":\"NA\",\"18\":\"1074\",\"19\":\"SACRAMENTO MUNICIPAL UTILITY DISTRICT\",\"_rn_\":\"5\"},{\"1\":\"4775\",\"2\":\"384931N1212618W001\",\"3\":\"1443623\",\"4\":\"2001-03-15\",\"5\":\"118.4\",\"6\":\"117.4\",\"7\":\"0\",\"8\":\"116.5\",\"9\":\"1.9\",\"10\":\"116.5\",\"11\":\"115.5\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Water level accuracy is unknown\",\"15\":\"1\",\"16\":\"Department of Water Resources\",\"17\":\"NA\",\"18\":\"1074\",\"19\":\"SACRAMENTO MUNICIPAL UTILITY DISTRICT\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n# pass a query to the database\ndbGetQuery(dbcon, \"SELECT * from measurements_sep WHERE STN_ID = 4775 LIMIT 5\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"STN_ID\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"SITE_CODE\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WLM_ID\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MSMT_DATE\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WLM_RPE\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WLM_GSE\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RDNG_WS\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RDNG_RP\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WSE\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RPE_WSE\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"GSE_WSE\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WLM_QA_DESC\"],\"name\":[12],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WLM_DESC\"],\"name\":[13],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WLM_ACC_DESC\"],\"name\":[14],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"WLM_ORG_ID\"],\"name\":[15],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WLM_ORG_NAME\"],\"name\":[16],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"MSMT_CMT\"],\"name\":[17],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"COOP_AGENCY_ORG_ID\"],\"name\":[18],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"COOP_ORG_NAME\"],\"name\":[19],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"4775\",\"2\":\"384931N1212618W001\",\"3\":\"1443624\",\"4\":\"2004-03-01\",\"5\":\"118.4\",\"6\":\"117.4\",\"7\":\"0\",\"8\":\"127.0\",\"9\":\"-8.6\",\"10\":\"127.0\",\"11\":\"126.0\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Water level accuracy is unknown\",\"15\":\"1\",\"16\":\"Department of Water Resources\",\"17\":\"NA\",\"18\":\"1074\",\"19\":\"SACRAMENTO MUNICIPAL UTILITY DISTRICT\"},{\"1\":\"4775\",\"2\":\"384931N1212618W001\",\"3\":\"1443625\",\"4\":\"2003-10-01\",\"5\":\"118.4\",\"6\":\"117.4\",\"7\":\"0\",\"8\":\"121.7\",\"9\":\"-3.3\",\"10\":\"121.7\",\"11\":\"120.7\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Water level accuracy is unknown\",\"15\":\"1\",\"16\":\"Department of Water Resources\",\"17\":\"NA\",\"18\":\"1074\",\"19\":\"SACRAMENTO MUNICIPAL UTILITY DISTRICT\"},{\"1\":\"4775\",\"2\":\"384931N1212618W001\",\"3\":\"1443622\",\"4\":\"2003-03-15\",\"5\":\"118.4\",\"6\":\"117.4\",\"7\":\"0\",\"8\":\"119.5\",\"9\":\"-1.1\",\"10\":\"119.5\",\"11\":\"118.5\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Water level accuracy is unknown\",\"15\":\"1\",\"16\":\"Department of Water Resources\",\"17\":\"NA\",\"18\":\"1074\",\"19\":\"SACRAMENTO MUNICIPAL UTILITY DISTRICT\"},{\"1\":\"4775\",\"2\":\"384931N1212618W001\",\"3\":\"1443620\",\"4\":\"2002-10-01\",\"5\":\"118.4\",\"6\":\"117.4\",\"7\":\"0\",\"8\":\"128.9\",\"9\":\"-10.5\",\"10\":\"128.9\",\"11\":\"127.9\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Water level accuracy is unknown\",\"15\":\"1\",\"16\":\"Department of Water Resources\",\"17\":\"NA\",\"18\":\"1074\",\"19\":\"SACRAMENTO MUNICIPAL UTILITY DISTRICT\"},{\"1\":\"4775\",\"2\":\"384931N1212618W001\",\"3\":\"1443621\",\"4\":\"2001-10-01\",\"5\":\"118.4\",\"6\":\"117.4\",\"7\":\"0\",\"8\":\"131.4\",\"9\":\"-13.0\",\"10\":\"131.4\",\"11\":\"130.4\",\"12\":\"NA\",\"13\":\"Unknown\",\"14\":\"Water level accuracy is unknown\",\"15\":\"1\",\"16\":\"Department of Water Resources\",\"17\":\"NA\",\"18\":\"1074\",\"19\":\"SACRAMENTO MUNICIPAL UTILITY DISTRICT\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n\n## Write (export) data\n\nTo write (export) data in R you need 2 things: data to write, and a location and format to write the data. For example, if we wanted to write our stations data to a csv in the \"`data_output`\" folder, we would do the following:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# write \"stations\" to a file in the data_output folder called \"my_stations.csv\"\nwrite_csv(stations, \"data_output/my_stations.csv\")\n```\n:::\n\n\n\n\nNow check that location and verify that your station data was written. \n\nWe can do the same for other files:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# write the Sacramento county polygon to a shapefile\nst_write(sac_county, \"data_output/sac_county.shp\")\n\n# write the Sacramento county polygon to an rds file\nwrite_rds(sac_county, \"data_output/sac_county.rds\")\n```\n:::\n\n\n\n\nAs before, navigate to these folders to verify these data were written. We can also check to see if these data exist from within R:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_results <- list.files(\"data_output\")\nmy_files  <- c(\"sac_county.shp\", \"sac_county.rds\")\n \n# test if your files are in the data_output folder\nmy_files %in% my_results\n\n# another handy function is `file.exists`, which tells you if your file exists\nfile.exists(\"data_output/sacramento_county.shp\")\nfile.exists(\"data_output/sac_county.shp\")\nfile.exists(\"data_output/sac_county.rds\")\n```\n:::\n\n\n\n\n\n\n:::challenge\n\n<font color=\"#009E73\">**Challenge 2**</font> \n\n1. create an object called `breakfast` and assign it a string with what you had for breakfast. \n2. write that object to `breakfast.rds` file in `/data_output`\n3. verify this worked by reading the string back in and inspecting it\n\n:::\n\n<br>\n\n<details>\n  <summary class=\"challenge-ans-title\"><font color=\"#0072B2\">**Click for Answers!**</font></summary>\n  <div class=\"challenge-ans-body\">\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# create a string and write it to an rds file\nbreakfast <- \"green eggs and ham\"\n\n# write_rds takes two arguments: the object to write and location to write it\nwrite_rds(breakfast, \"data_output/breakfast.rds\")\n\n# read the rds file back into R and save it as a variable\nmy_breakfast <- read_rds(\"data_output/breakfast.rds\")\n\n# use the `cat()` function (concatenate) to announce your breakfast\ncat(\"Today for breakfast I ate\", my_breakfast)\n```\n:::\n\n\n\n\n  </div>\n</details>\n\n<br>  \n\n\n\n",
    "supporting": [
      "m_importing_and_exporting_data_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}