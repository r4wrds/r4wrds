<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Plot Data</title>

<script src="site_libs/header-attrs-2.5/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link href="site_libs/ionicons-2.0.1/css/ionicons.min.css" rel="stylesheet" />
<link rel="stylesheet" href="site_libs_extra/academicons-1.8.0/css/academicons.css"/>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">WRDS R Intro</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home fa-1.5x"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="ion ion-hammer"></span>
     
    Setup
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="00_install_R.html">
        <span class="fa fa-laptop"></span>
         
        Installing R/RStudio
      </a>
    </li>
    <li>
      <a href="01_RStudio_cloud.html">
        <span class="fa fa-cloud"></span>
         
        Setting up RStudio Cloud
      </a>
    </li>
    <li>
      <a href="02_setup_R.html">
        <span class="fa fa-map-signs"></span>
         
        Getting Started
      </a>
    </li>
    <li>
      <a href="03_project_management.html">
        <span class="fa fa-sitemap"></span>
         
        Project Management
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-bicycle fa-1x"></span>
     
    1: Data In, Plot Out!
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Lesson 1:</li>
    <li>
      <a href="m1_1_using_R.html">
        <span class="fa fa-download"></span>
         
        Importing Data
      </a>
    </li>
    <li class="dropdown-header">Lesson 2:</li>
    <li>
      <a href="m1_2_wrangling.html">
        <span class="fa fa-magic"></span>
         
        Wrangling Data
      </a>
    </li>
    <li class="dropdown-header">Lesson 3:</li>
    <li>
      <a href="m1_3_plotting.html">
        <span class="fa fa-area-chart"></span>
         
        Plotting with ggplot
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-car"></span>
     
    2: Excel to a Map
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Lesson 1:</li>
    <li>
      <a href="m2_1_working_w_xls.html">
        <span class="fa fa-table"></span>
         
        Working from Excel
      </a>
    </li>
    <li class="dropdown-header">Lesson 2:</li>
    <li>
      <a href="m2_2_joins.html">
        <span class="fa fa-object-ungroup"></span>
         
        Joining Data
      </a>
    </li>
    <li class="dropdown-header">Lesson 3:</li>
    <li>
      <a href="m2_3_using_sf.html">
        <span class="fa fa-map-pin"></span>
         
        Using {sf}
      </a>
    </li>
    <li class="dropdown-header">Lesson 4:</li>
    <li>
      <a href="m2_4_mapping_w_sf.html">
        <span class="fa fa-map fa-1x"></span>
         
        Make a Map!
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-space-shuttle fa-1x"></span>
     
    And Beyond
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="m3_1_usaboundaries.html">
        <span class="fa fa-code-branch"></span>
         
        Getting US Boundaries
      </a>
    </li>
    <li>
      <a href="m3_2_nhdtoolsPlus.html">
        <span class="fa fa-tint"></span>
         
        Downloading NHD River Data
      </a>
    </li>
    <li>
      <a href="http://usgs-r.github.io/dataRetrieval/articles/nldi.html">
        <span class="fa fa-road"></span>
         
        Query the NLDI Network
      </a>
    </li>
    <li>
      <a href="m3_3_useful_water_pkgs.html">
        <span class="fa fa-archive"></span>
         
        Helpful Packages
      </a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="resources.html">
    <span class="fa fa-list"></span>
     
    Resources
  </a>
</li>
<li>
  <a href="https://github.com/ryanpeek/WRDS_intro/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Plot Data</h1>

</div>


<p><br>
<br></p>
<div class="obj">
<p><strong>Objectives for this section:</strong></p>
<ul>
<li>create a basic plot using ggplot</li>
<li>customize figures (colors, axes labels, etc.)</li>
<li>export and save figures</li>
</ul>
</div>
<p><br></p>
<div id="plotting-with-ggplot2" class="section level2">
<h2>Plotting with ggplot2</h2>
<p>The entire workflow of data exploration is enhanced through looking at your data, whether you’re exploring a dataset for the first time or creating publication-ready figures. Viewing your data provides insight into patterns that can help you explore different hypotheses. No analysis is complete without a solid graphic.</p>
<div class="figure"><span id="fig:unnamed-chunk-1"></span>
<img src="images/ggplot2.png" alt="*Illustration by @allison_horst.*" width="100%" />
<p class="caption">
Figure 1: <em>Illustration by <span class="citation">@allison_horst</span>.</em>
</p>
</div>
<p><br></p>
<p>Today, we’ll learn the core concepts behind the popular <a href="https://ggplot2.tidyverse.org/reference/ggplot2-package.html"><code>{ggplot2}</code></a> package. This package follows a strict philosophy known as the <em>grammar of graphics</em> that was designed to make thinking, reasoning, and communicating about graphs easier by following a few simple rules. Like building a sentence in speech (aka grammar), all graphs contain the foundational components that are used for building other graph pieces: <code>ggplot()</code>, <code>geom</code>, and <code>aes()</code>.</p>
<p>With ggplot2, you begin a plot with the function <code>ggplot()</code> which creates a coordinate system that you can add layers to. The first argument of <code>ggplot()</code> is the dataset to use in the graph. So <code>ggplot(data = ascidat)</code> creates an empty base graph.</p>
<pre class="r"><code>ggplot(data = ascidat)</code></pre>
<p>You complete your graph by adding one or more layers (aka <code>geoms</code>) to <code>ggplot()</code>. The function <code>geom_point()</code> adds a layer of points to your plot, which creates a scatterplot. Ggplot2 comes with many geom functions that each add a different type of layer to a plot.</p>
<pre class="r"><code>ggplot(data = ascidat) +
  geom_point()</code></pre>
<p>Each geom function in ggplot2 takes a <code>mapping</code> argument. This defines how variables in your dataset are mapped to visual properties. The <code>mapping</code> argument is defined with <code>aes()</code>, and the <code>x</code> and <code>y</code> arguments of <code>aes()</code> specify which variables to map to the x and y axes. ggplot2 looks for the mapped variable in the <code>data</code> argument, in this case, <code>ascidat</code>.</p>
<pre class="r"><code>ggplot(data = ascidat) +
  geom_point(mapping = aes(x = site_type, y = ASCI))</code></pre>
<p><br></p>
<p><strong>Just remember these requirements:</strong></p>
<ul>
<li>All ggplot plots start with the <code>ggplot</code> function</li>
<li>It will need three pieces of information: the <strong>data</strong>, a <strong>geom</strong> layer, and how the data are <strong>mapped</strong> to the plot <strong>aesthetics</strong></li>
</ul>
<p>The core unit of every <em>ggplot</em> looks like this:</p>
<pre class="r"><code>ggplot(data = &lt;DATA&gt;) + 
  &lt;GEOM_FUNCTION&gt;(mapping = aes(&lt;MAPPINGS&gt;))</code></pre>
<p>Let’s restart our session and load our data!</p>
<div class="challenge">
<p><strong>Challenge</strong></p>
<ol style="list-style-type: decimal">
<li><p>Load {tidyverse} package into R. This includes <strong>{<code>ggplot</code>}</strong></p></li>
<li><p>Load or read the <code>csci</code> and <code>asci</code> datasets into R. Comment your code!</p></li>
<li><p>Save your script.</p></li>
</ol>
</div>
<details>
<summary class="challenge-ans-title">
<strong>Click for Answers!</strong>
</summary>
<div class="challenge-ans-body">
<pre class="r"><code># load the library
library(tidyverse)

# Load CSCI and ASCI datasets.
cscidat &lt;- read_csv(&#39;data/cscidat.csv&#39;)
ascidat &lt;- read_csv(&#39;data/ascidat.csv&#39;)

# check environment, both are there!</code></pre>
</div>
</details>
<p><br></p>
<p>Now let’s apply the basics of <em>ggplot</em> to our <code>ascidat</code>:</p>
<pre class="r"><code>ggplot(data = ascidat) +
  geom_point(mapping = aes(x = site_type, y = ASCI))</code></pre>
<p><img src="m1_3_plotting_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Let’s make a quick ggplot using some of the guidance from above. For this figure, we’ll create some boxplots to show the distribution of ASCI scores at different site types (i.e., reference, intermediate, and stressed). This follows the same syntax as above but we’ll use the <code>geom_boxplot</code> geometry. We will also add appropriate labels and a title.</p>
<pre class="r"><code>    # boxplot of ASCI scores
    
    asci_box &lt;- ggplot(data = ascidat) +
      geom_boxplot(mapping = aes(x = site_type, y = ASCI)) +
      labs(x = &quot;Site Type&quot;,
        y = &quot;ASCI Score&quot;,
        title = &quot;CABW Workshop Figure&quot;,
        subtitle = &quot;October 13, 2020&quot;,
        caption = &quot;Data Source: CEDEN&quot;)
    
    asci_box</code></pre>
<p><img src="m1_3_plotting_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>When you’re done, examine the plot. What does it tell you about the distribution of CSCI scores?</p>
</div>
<div id="exporting-figures" class="section level2">
<h2>Exporting figures</h2>
<p>Now, let’s go ahead and save the plot using <code>ggsave()</code>.</p>
<pre class="r"><code># saves most recently run plot

ggsave((&quot;asci_boxplot.png&quot;),
     path = &quot;/Insert/File/Path/Here/Ending/In/A/Folder&quot;,
     width = 25,
     height = 15,
     units = &quot;cm&quot;
   )</code></pre>
<p>Feel free to checkout the official <a href="https://ggplot2.tidyverse.org/reference/ggplot2-package.html">ggplot2</a> website for more information. The RStudio <a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">cheatsheet</a> is also very helpful.</p>
</div>
<div id="summary" class="section level2">
<h2>Summary</h2>
<p>In this module we learned about R and Rstudio, some of the basic syntax and data structures in R, and how to import files from a <code>.csv</code>. We’ve just imported some provisional data for the California Stream Condition Index (CSCI) and the Algal Stream Condition Index (ASCI) that we’ll continue to use for the rest of the workshop. These data represent a portion of the sampling sites that were used to develop each index. Tomorrow, we’ll learn how to process and plot these data spatially to gain insight into bioassessment patterns throughout the state.</p>
<div class="figure"><span id="fig:unnamed-chunk-9"></span>
<img src="images/youcandoit.png" alt="*Illustration by @allison_horst.*" width="100%" />
<p class="caption">
Figure 2: <em>Illustration by <span class="citation">@allison_horst</span>.</em>
</p>
</div>
</div>

<!DOCTYPE html>

<!-- Add icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


<div class="foot">
	<hr> 
	<p style="text-align: center;">
	  <span style="color: #808080; display: inline-block; width: 58%;">
	  &#9781 &nbsp;<i>Website design by <a href="https://ryanpeek.org/">Ryan Peek</i></a> &nbsp;  
    <a href="https://github.com/Cal-SFS/" class="fa fa-github">Cal-SFS</a> &nbsp; &#9781
    </span>
  </p>
</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
